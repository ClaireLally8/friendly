{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-5">
    <a href="{% url 'activities' %}"><i class="fas fa-arrow-left mx-2"></i>Back to overview</a>
    <div class="row mx-5 mt-4">
        <div class="col-sm-12 col-md-8 col-lg-8 px-5">
            <h1>{{ activity.name }}</h1>
            {% if logged_in_user == activity.host %}
            <a href="{% url 'edit-activity' activity.id %}" class="a-small mx-2">Edit</a>
            <a href="{% url 'delete-activity' activity.id %}" class="a-small mx-2">Delete</a>
            {% endif %}
            <h5 class="mt-3">Hosted By</h5>
            <h4><strong>{{ activity.host.first_name }} {{ activity.host.last_name }}</strong></h4>
            <p class="my-5">{{ activity.description }}</p>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-4 mt-5">
            <div class="overlay p-3 shadow-4 rounded">
                <p><i class="far fa-clock px-2"></i>Available from {{ activity.start_datetime }} to {{ activity.end_time }}</p>
                {% if activity.town %}
                <p><i class="fas fa-map-marker-alt px-2"></i>{{ activity.town }} in Co.{{ activity.location }}</p>
                {% else %}
                <p><i class="fas fa-map-marker-alt px-2"></i>{{ activity.location }}</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="overlay p-4">
                        <h5>{{ activity.host.first_name }} {{ activity.host.last_name }}</strong></h5>
                        <h6><small>{{ activity.host.username }}</small></h6>
                        {% if profile.bio %}
                        <p class="dark-text">{{ profile.bio }}</p>
                        {% endif %}
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end m-5">
            <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-mdb-toggle="modal" data-mdb-target="#staticBackdrop">Request Listing
  </button>
  
  <!-- Modal -->
  <div
    class="modal fade"
    id="staticBackdrop"
    data-mdb-backdrop="static"
    data-mdb-keyboard="false"
    tabindex="-1"
    aria-labelledby="staticBackdropLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Request for {{ activity.name }}</h5>
          <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
        </div>
        <form action="{% url 'request-activity' activity.id%}" method="POST">
            {% csrf_token %}
        <div class="modal-body">
                {{ form.message | as_crispy_field }}
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Request Activity</button>
        </div>
    </form>
      </div>
    </div>
  </div>
        </div>
        
    </div>

{% endblock %}